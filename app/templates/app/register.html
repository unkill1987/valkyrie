<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>Valkyrie System</title>

    <!-- Favicon  -->
    <link rel="icon" href="{% static 'app/img/core-img/favicon.ico'%}">

    <!-- Core Style CSS -->
    <link rel="stylesheet" href="{% static 'app/css/core-style.css'%}">
    <link rel="stylesheet" href="{% static 'app/css/style.css'%}">

    <!-- Responsive CSS -->
    <link href="{% static 'app/css/responsive.css'%}" rel="stylesheet">

</head>

<style>
    @media (min-width:968px){.card{width:700px;}}
    @media (max-width:768px){section{padding:50px 0px 0px 0px!important}}
    body{background-image: url(../../static/app/img/register.jpg);
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position:center;}
    label,a{color:#ff8a12; weight:500;}
    .btn{color:#ff8a12;border-color:#ff8a12;}
    .btn:hover{background-color:#ff8a12; border-color:#ff8a12;}
    .card{background:#1d1d1de8; }


</style>
<body>
<!-- Preloader -->
<div id="preloader">
    <div class="showbox">
        <div class="loader">
            <svg class="circular" viewBox="25 25 50 50">
                <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>
            </svg>
        </div>
    </div>
    <div class="questions-area text-center">
        <p>Please Wait...</p>
        <ul>
            <li>Valkyrie Blockchain Trade System</li>
        </ul>
    </div>
</div>

<!-- Gradient Background Overlay -->
<div class="gradient-background-overlay"></div>

<!-- Header Area Start -->
<header class="header-area bg-img">
    <div class="container-fluid h-100">
        <div class="row h-100 align-items-center">
            <div class="col-12 h-100">
                <div class="main-menu h-100">
                    <nav class="navbar h-100 navbar-expand-lg">
                        <!-- Logo Area  -->
                        <a class="navbar-brand" href="{% url 'index' %}"><img
                                src="{% static 'app/img/core-img/logo.png'%}"
                                alt="Logo"></a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#studioMenu"
                                aria-controls="studioMenu" aria-expanded="false" aria-label="Toggle navigation"><i
                                class="fa fa-bars"></i> Menu
                        </button>

                        <div class="collapse navbar-collapse" id="studioMenu">
                            <!-- Menu Area Start  -->
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url 'about'%}">ABOUT</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url 'registerpage'%}">REGISTER</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url 'login'%}">LOGIN</a>
                                </li>
                            </ul>
                            <!-- Search Form -->

                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Header Area End -->

<!-- Social Sidebar Area Start -->

<!-- Social Sidebar Area End -->

<!--Valkyrie System Area Start -->
<section class="blog-area " style="padding-top:5%;padding-bottom:50px">
    <div class="container">
        <div class="row justify-content-center">
            <div class="container-fluid">
                <div class="card card-register mx-auto mt-5">
                    <div class="card-header"
                         style="color:#ff8a12;font-weight:700; border-bottom:solid 1px; border-color:white!important;">
                        Register an Account
                    </div>
                    <div class="card-body">
                        <form method="POST">

                            <p>Role</p>

                            <input id="importer" type="checkbox" name="user_role" value="1">
                            <label for="importer" style="color:#ff8a12;">수입자</label>
                            <input id="exporter" type="checkbox" name="user_role" value="2">
                            <label for="exporter" style="color:#ff8a12;">수출자</label>
                            <input id="bank" type="checkbox" name="user_role" value="3">
                            <label for="bank" style="color:#ff8a12;">은행</label>
                            <input id="shipper" type="checkbox" name="user_role" value="4">
                            <label for="shipper" style="color:#ff8a12;">운송사</label>
                            <hr style="border-top:solid 1px; border-color:white!important;">
                            <div class="form-group">
                                <div class="form-label-group">
                                    <label for="user_name">User name</label>
                                    <input type="text" name="user_name" id="user_name" class="form-control"
                                           placeholder="name"
                                           required="required" autofocus="autofocus">

                                </div>
                            </div>
                            <!--user_email-->
                            <div class="form-group">
                                <div class="form-label-group">
                                    <label for="user_id">Email address (ID)</label>
                                    <input type="email" name='user_id' id="user_id" class="form-control"
                                           placeholder="Email address" required="required">

                                </div>
                            </div>

                            <div class="form-group">
                                <div class="form-label-group">
                                    <label>Address</label>
                                    <a class="btn btn-outline-dark" style="padding:0px 10px 0px 10px; color:white;" id="postcodify_search_button">Search</a>
                                    <ul class="list-group" >
                                        <li class="list-group-item" style="background:#ffffff12;">
                                            <br>
                                            <label class="form-group-text" for="postcode">Postcode</label>
                                            <input type="text" id="postcode" name="postcode" placeholder="Postcode"
                                                   class="form-control postcodify_postcode5" value=""/><br/>
                                            <label class="form-group-text" for="address">Address</label>
                                            <input type="text" id="address" name="address" placeholder="Address"
                                                   class="form-control postcodify_address" value=""/><br/>
                                            <label class="form-group-text" for="details">Details</label>
                                            <input type="text" id="details" name="details" placeholder="Details"
                                                   class="form-control postcodify_details" value=""/><br/>
                                            <label class="form-group-text" for="extra">Extra Info</label>
                                            <input type="text" id="extra" name="extra" placeholder="Extra Info"
                                                   class="form-control postcodify_extra_info" value=""/><br/>
                                            <span style="text-align:center;">

                                            </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!--user_password-->
                            <div class="form-group">
                                <div class="form-label-group">
                                    <label for="user_pw">Password</label>
                                    <h6 style="color:#ff8a12;">(숫자,영문,특수문자 포함 6자리 이상)</h6>
                                    <input type="password" name='user_pw' id="user_pw" class="form-control"
                                           placeholder="Password" required="required">

                                </div>
                            </div>
                            <!--user_confrim_password-->
                            <div class="form-group">
                                <div class="form-label-group">
                                    <label for="user_confirm_pw">Comfirm Password</label>
                                    <input type="password" name='user_confirm_pw' id="user_confirm_pw"
                                           class="form-control"
                                           placeholder="Password" required="required">

                                </div>
                            </div>
                            <hr style="border-top:solid 1px; border-color:white!important;">

                            <button class="btn btn-outline-dark btn-block" id="register">Register</button>
                            {% csrf_token %}

                        </form>
                        <div class="text-center">
                            <a class="d-block small mt-3" href="{% url 'login'%}">Login Page</a>
                            <a class="d-block small" href="{% url 'forgot' %}">Forgot Password?</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<!--Valkyrie System Area End -->

<!-- Footer Area Start -->
<footer class="footer-area">
    <div class="container-fluid h-100">
        <div class="row h-100">
            <div class="col-12 h-100">
                <div class="footer-content h-100 d-md-flex align-items-center justify-content-between">
                    <!-- Single Footer Content -->
                    <div class="single-footer-content">
                        <img src="{% static 'app/img/core-img/map.png'%}" alt="">
                        <a href="#">Korea, Seoul</a>
                    </div>
                    <!-- Single Footer Content -->
                    <div class="single-footer-content">
                        <img src="{% static 'app/img/core-img/smartphone.png'%}" alt="">
                        <a href="#">000-0000-0000</a>
                    </div>
                    <!-- Single Footer Content -->
                    <div class="single-footer-content">
                        <img src="{% static 'app/img/core-img/envelope-2.png'%}" alt="">
                        <a href="#">valkyrie@valkyriesystem.online</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Area End -->


<!-- jQuery (Necessary for All JavaScript Plugins) -->
<script src="{% static 'app/js/jquery/jquery-2.2.4.min.js'%}"></script>
<!-- Popper js -->
<script src="{% static 'app/js/popper.min.js'%}"></script>
<!-- Bootstrap js -->
<script src="{% static 'app/js/bootstrap.min.js'%}"></script>
<!-- Plugins js -->
<script src="{% static 'app/js/plugins.js'%}"></script>
<!-- Active js -->
<script src="{% static 'app/js/active.js'%}"></script>

<script src="//d1p7wdleee1q2z.cloudfront.net/post/search.min.js"></script>

</body>

<script>
$(function() { $("#postcodify_search_button").postcodifyPopUp(); });

$("#user_id").keyup(function(){
    var email = document.getElementById('user_id');
    $.ajax({
        url:'/checkid/',
        type:'post',
        data:$('form').serialize(),
        success:function(res){
            if(res.result == 'exist' | !check(/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/, email)){
                $('#user_id').css("background-color", "#ffcece");
            }else{
                $('#user_id').css("background-color", "#dafdc5");
            }
        }
    });
});


$("#user_pw").keyup(function(){
    var email = document.getElementById('user_pw');
    if(!check(/^(?=.*?[a-zA-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$/, user_pw)){
        $('#user_pw').css("background-color", "#ffcece");
    }else{
        $('#user_pw').css("background-color", "#dafdc5");
    }
});


$('#register').click(function(){

    var check_id = $('input:checked').val();
    var name = $('#user_name').val();
    var user_pw = document.getElementById('user_pw');
    var user_confirm_pw = $('#user_confirm_pw').val();
    var user_pass = $('#user_pw').val();
    var email = document.getElementById('user_id');

    if  (check_id == null) {
        alert("역할을 선택하세요");
        return false;

    }else if (name.length == 0){
        alert("이름을 입력하세요");
        return false;

    }else if(!chk(/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/, email, "이메일 형식에 어긋납니다.")){
        return false;

    }else if(!chk(/^(?=.*?[a-zA-Z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$/, user_pw, "비밀번호 : 영문,숫자,특수문자(!@$%^&* 만 허용)를 사용하여 6~16자까지, 영문은 대소문자를 구분합니다.")){
        return false;

    }else if (user_confirm_pw.length == 0){
        alert("비밀번호 확인란을 입력하세요");
        return false;

    }else if(user_pass != user_confirm_pw){
        alert("비밀번호 매칭 실패");
        return false;
    }else{
        $.ajax({
          url: '/register/',
          type: 'post',
          data: $('form').serialize(),
          success: function(res) {
            if(res.result == '가입완료') {
                alert(res.result)
                location = '/'
            }else{
                alert(res.result)
            }
            return false;
          }
        });
        return false;
    }
});

    function chk(re, e, msg) {
        if (re.test(e.value)) {
           return true;
        }
        alert(msg);
        e.focus();
        return false;
    }


    function check(re, e) {
        if (re.test(e.value)) {
           return true;
        }
        e.focus();
        return false;
    }
















</script>

</html>
